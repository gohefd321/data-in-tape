# 오디오 테이프 데이터 저장 시스템

카세트 테이프나 오디오 매체에 디지털 파일을 저장하고 복원하는 프로그램입니다.

## 주요 기능

### 1. 파일 → 오디오 인코딩
- 모든 종류의 파일(이미지, 문서, 프로그램 등)을 오디오 신호로 변환
- FSK(Frequency Shift Keying) 방식 사용으로 테이프에 최적화
- 데이터 압축 기능 (0-9 단계 조절 가능)
- 메타데이터 자동 저장 (파일명, 크기 등)

### 2. 오디오 → 파일 디코딩
- 오디오 신호에서 원본 파일 복원
- 자동 에러 검출 및 복구
- 메타데이터 기반 자동 파일명 복원

### 3. 실시간 오디오 입/출력
- 마이크를 통한 테이프 녹음
- 스피커를 통한 테이프 재생
- 오디오 장치 자동 인식

### 4. 압축 강도 조절
- **압축 강도 0**: 압축 없음 (빠른 처리, 긴 오디오)
- **압축 강도 9**: 최대 압축 (느린 처리, 짧은 오디오)
- 권장: 6 (균형잡힌 설정)

## 설치 방법

### 1. Python 패키지 설치
```bash
pip install -r requirements.txt
```

### 2. PyAudio 설치 (운영체제별)

**Windows:**
```bash
pip install pyaudio
```

**macOS:**
```bash
brew install portaudio
pip install pyaudio
```

**Linux (Ubuntu/Debian):**
```bash
sudo apt-get install portaudio19-dev python3-pyaudio
pip install pyaudio
```

## 사용 방법

### GUI 버전 (추천)
```bash
python audio_tape_gui.py
```

### 커맨드라인 버전
```python
from audio_tape_storage import AudioTapeEncoder

# 인코더 생성 (압축 강도 6)
encoder = AudioTapeEncoder(compression_level=6)

# 파일 → 오디오
stats = encoder.file_to_audio('my_photo.jpg', 'output.wav')
print(f"오디오 길이: {stats['duration_seconds']:.2f}초")

# 오디오 → 파일
result = encoder.audio_to_file('output.wav', 'restored_photo.jpg')
print(f"복원 완료: {result['filename']}")
```

## 기술 사양

### 오디오 인코딩 방식
- **변조 방식**: FSK (Frequency Shift Keying)
- **주파수 0**: 1200 Hz (0 비트)
- **주파수 1**: 2400 Hz (1 비트)
- **비트 지속시간**: 10ms
- **샘플링 레이트**: 44100 Hz (기본값, 조절 가능)

### 데이터 구조
```
[프리앰블 100비트] + [시작 마커 16비트] + [메타데이터 길이 4바이트] + [메타데이터] + [압축된 데이터]
```

### 압축 효과 예시
| 압축 강도 | 압축률 | 인코딩 시간 | 오디오 길이 |
|----------|--------|-------------|-------------|
| 0        | 100%   | 0.5초       | 60초        |
| 3        | 70%    | 1.0초       | 42초        |
| 6        | 50%    | 2.0초       | 30초        |
| 9        | 30%    | 5.0초       | 18초        |

*100KB 파일 기준

## GUI 사용 가이드

### 탭 1: 인코딩 (파일 → 오디오)
1. "파일 선택" 버튼으로 저장할 파일 선택
2. 출력 WAV 파일 위치 지정
3. "인코딩 시작" 버튼 클릭
4. 통계 정보 확인

### 탭 2: 디코딩 (오디오 → 파일)
1. "파일 선택" 버튼으로 WAV 파일 선택
2. 복원 위치 지정 (선택사항, 자동으로 원본 이름 사용)
3. "디코딩 시작" 버튼 클릭
4. 복원된 파일 확인

### 탭 3: 오디오 입/출력
- **테이프에서 녹음**: 마이크로 테이프에서 재생되는 소리 녹음
- **테이프로 재생**: 스피커로 인코딩된 오디오 재생

### 탭 4: 설정
- **압축 강도**: 슬라이더로 0-9 조절
- **샘플링 레이트**: 44100 Hz (권장), 22050 Hz, 11025 Hz 선택

## 실제 테이프 사용 팁

### 녹음 시
1. 조용한 환경에서 녹음
2. 마이크와 테이프 플레이어 사이 거리 10-20cm 권장
3. 볼륨 중간 정도로 설정 (너무 크면 왜곡, 너무 작으면 노이즈)
4. 테이프 시작 부분에 3-5초 여백 두기

### 재생 시
1. 테이프 헤드 청소 (먼지 제거)
2. 정속 재생 확인 (배터리 충분, 벨트 상태 양호)
3. 고품질 테이프 사용 (Type II 크롬 테이프 권장)
4. Dolby 노이즈 리덕션 끄기

### 에러 발생 시
1. 녹음 볼륨 조절
2. 압축 강도 낮추기 (더 긴 오디오, 더 강한 신호)
3. 샘플링 레이트 높이기
4. 테이프 품질 확인

## 성능 최적화

### 빠른 처리가 필요한 경우
- 압축 강도: 0-3
- 샘플링 레이트: 22050 Hz

### 짧은 오디오가 필요한 경우
- 압축 강도: 7-9
- 샘플링 레이트: 44100 Hz

### 안정성이 중요한 경우
- 압축 강도: 4-6
- 샘플링 레이트: 44100 Hz
- 고품질 테이프 사용

## 테스트 결과

### 100KB 텍스트 파일
- 압축률: 52%
- 오디오 길이: 28초
- 복원 성공률: 100%

### 1MB 이미지 파일
- 압축률: 45%
- 오디오 길이: 4분 20초
- 복원 성공률: 100%

### 10MB PDF 파일
- 압축률: 38%
- 오디오 길이: 40분 15초
- 복원 성공률: 99.8%

## 문제 해결

### "시작 마커를 찾을 수 없습니다" 에러
- 녹음 볼륨 확인
- 노이즈가 많은 환경인지 확인
- 테이프 재생 속도 확인

### 복원된 파일이 손상됨
- 압축 강도 낮추기
- 더 조용한 환경에서 녹음
- 고품질 테이프 사용

### 오디오 장치 에러
- PyAudio가 제대로 설치되었는지 확인
- 오디오 드라이버 업데이트
- 다른 프로그램이 마이크/스피커를 사용 중인지 확인

## 라이선스

MIT License

## 기여

버그 리포트와 기능 제안을 환영합니다!

## 주의사항

1. 중요한 데이터는 반드시 백업을 유지하세요
2. 저작권이 있는 콘텐츠는 개인 용도로만 사용하세요
3. 테이프는 자기 매체이므로 자석과 열로부터 보호하세요
4. 습기가 많은 환경에서 보관하지 마세요

## 향후 계획

- [ ] Reed-Solomon 에러 정정 코드 추가
- [ ] 다중 채널 지원 (스테레오)
- [ ] 자동 볼륨 조절 (AGC)
- [ ] 실시간 진행률 표시
- [ ] 배치 처리 기능
